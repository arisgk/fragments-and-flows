---
import { Icon } from 'astro-icon/components';

import {
  type Post,
  getFormattedDisplayDate,
  isInternalPost,
  isExternalPost,
  getIconName,
} from '../../models/post';

interface Props {
  post: Post;
  size: 'small' | 'normal';
  displayDate?: boolean;
}

const { post, size, displayDate = true } = Astro.props;
---

<div class="flex flex-col items-center sm:items-start gap-2">
  {
    displayDate && (
      <div class="flex items-center gap-3">
        <p class="text-black/70 dark:text-white/70 text-xs md:text-sm">
          {getFormattedDisplayDate(post)}
        </p>
      </div>
    )
  }

  <a
    href={isInternalPost(post) ? `/garden/${post.slug}` : post.url}
    target={isExternalPost(post) ? '_blank' : undefined}
    rel={isExternalPost(post) ? 'noopener' : undefined}
  >
    <div class="flex gap-2 items-center">
      <div class="text-black/90 dark:text-white/90">
        <Icon name={getIconName(post)} aria-hidden="true" class="size-6" />
      </div>

      <h3
        class={size === 'normal'
          ? 'text-black/90 dark:text-white/90 text-xl sm:text-2xl md:text-3xl text-center sm:text-left font-serif font-bold'
          : 'text-black/90 dark:text-white/90 text-lg md:text-[1.375rem] text-center sm:text-left font-serif font-bold'}
      >
        {post.title}
      </h3>
    </div>
  </a>
  <p
    class={size === 'normal'
      ? 'text-black/85 dark:text-white/85 text-base/7 md:text-lg/8 text-justify text-black font-light'
      : 'text-black/85 dark:text-white/85 text-sm/6 md:text-base/7 text-black text-justify font-light'}
  >
    {post.description}
  </p>
</div>
